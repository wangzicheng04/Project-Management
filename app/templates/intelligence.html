<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>海洋管理系统 - 智能中心</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/style.css">
    <style>
        body, html {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        .d-flex.flex-column.vh-100 {
            height: 100vh;
        }

        main.flex-grow-1 {
            overflow-y: auto;
        }

        @media (min-width: 768px) {
            .offcanvas-start.sidebar {
                position: static;
                transform: none;
                visibility: visible !important;
                width: 445px;
                height: 100vh;
                border-right: 1px solid rgba(255, 255, 255, 0.1);
            }
        }
    </style>
</head>

<body>
    <!-- 移动端顶部导航栏 -->
    <nav class="navbar navbar-dark bg-dark d-md-none">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebarOffcanvas" aria-controls="sidebarOffcanvas">
                <span class="navbar-toggler-icon"></span>
            </button>
            <span class="navbar-brand mb-0 h1">海洋管理系统</span>
        </div>
    </nav>
        <div class="container-fluid">
            <div class="d-flex">
                <!-- 响应式侧边栏 -->
                <div class="offcanvas offcanvas-start bg-dark text-white sidebar" tabindex="-1" id="sidebarOffcanvas">
                    <div class="offcanvas-header d-md-none">
                        <h5 class="offcanvas-title">菜单导航</h5>
                        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas"></button>
                    </div>
                    <div class="offcanvas-body p-3">
                        <div class="text-center mb-4">
                            <h5 class="text-white">海洋管理系统</h5>
                            <p class="text-white-50" id="userInfo">
                                欢迎，<span id="currentUser">{{ username }}</span>
                            </p>
                        </div>
                        <ul class="nav flex-column">
                            <li class="nav-item">
                                <a class="nav-link text-white" href="{{ url_for('main.user_dashboard') }}">
                                    <i class="bi bi-speedometer2 me-2"></i>主要信息
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link active text-white" href="{{ url_for('main.underwater') }}">
                                    <i class="bi bi-water me-2"></i>水下系统
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link text-white" href="{{ url_for('main.intelligence') }}">
                                    <i class="bi bi-cpu me-2"></i>智能中心
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link text-white" href="{{ url_for('main.admin_page') }}">
                                    <i class="bi bi-gear me-2"></i>管理员管理
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link text-white" href="{{ url_for('main.datacenter') }}">
                                    <i class="bi bi-database me-2"></i>数据中心
                                </a>
                            </li>
                            <li class="nav-item mt-5">
                                <a class="nav-link text-white" href="{{ url_for('auth.logout') }}">
                                    <i class="bi bi-box-arrow-right me-2"></i>退出登录
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            <!-- 侧边栏结束 -->
            <!-- 主内容区域 -->
            <main class="flex-grow-1 px-3 mt-3">
                <div
                    class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">智能中心</h1>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <button type="button" class="btn btn-sm btn-outline-primary me-2">
                            <i class="bi bi-gear"></i> 系统设置
                        </button>
                        <button type="button" class="btn btn-sm btn-outline-secondary">
                            <i class="bi bi-question-circle"></i> 帮助
                        </button>
                    </div>
                </div>

                <!-- 智能预测模块 -->
                <div class="row mb-4">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-header">
                                <h5>智能预测分析</h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="card mb-3">
                                            <div class="card-header bg-primary text-white">
                                                水质趋势预测
                                            </div>
                                            <div class="card-body">
                                                <canvas id="waterQualityPredictionChart"></canvas>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="card mb-3">
                                            <div class="card-header bg-success text-white">
                                                鱼类数量预测
                                            </div>
                                            <div class="card-body">
                                                <canvas id="fishPopulationPredictionChart"></canvas>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 异常检测模块 -->
                <div class="row mb-4">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-header">
                                <h5>异常检测系统</h5>
                            </div>
                            <div class="card-body">
                                <div class="alert alert-warning" role="alert">
                                    <i class="bi bi-exclamation-triangle-fill me-2"></i>
                                    <strong>注意:</strong> 系统检测到3个潜在异常，请查看详情。
                                </div>
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>时间</th>
                                            <th>类型</th>
                                            <th>位置</th>
                                            <th>详情</th>
                                            <th>状态</th>
                                            <th>操作</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="table-danger">
                                            <td>2023-11-15 08:23</td>
                                            <td>水质异常</td>
                                            <td>区域A-3</td>
                                            <td>pH值突然下降至6.2</td>
                                            <td><span class="badge bg-danger">未处理</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-primary">处理</button>
                                                <button class="btn btn-sm btn-secondary">详情</button>
                                            </td>
                                        </tr>
                                        <tr class="table-warning">
                                            <td>2023-11-15 07:45</td>
                                            <td>设备异常</td>
                                            <td>区域B-2</td>
                                            <td>水下摄像头UW002信号不稳定</td>
                                            <td><span class="badge bg-warning">处理中</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-primary">处理</button>
                                                <button class="btn btn-sm btn-secondary">详情</button>
                                            </td>
                                        </tr>
                                        <tr class="table-warning">
                                            <td>2023-11-14 22:10</td>
                                            <td>鱼群异常</td>
                                            <td>区域C-5</td>
                                            <td>鱼群密度异常增加</td>
                                            <td><span class="badge bg-warning">处理中</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-primary">处理</button>
                                                <button class="btn btn-sm btn-secondary">详情</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 智能预测分析部分 -->
                <div class="row">
                    <div class="col-md-12">
                        <div class="card mb-4">
                            <div class="card-header">
                                <h5>智能预测分析</h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <!-- 水质趋势预测 -->
                                    <div class="col-md-6">
                                        <div class="card mb-3">
                                            <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                                                <span><i class="bi bi-droplet-fill me-2"></i>水质趋势预测</span>
                                                <div class="btn-group">
                                                    <button class="btn btn-sm btn-light" id="waterQualityDay">日</button>
                                                    <button class="btn btn-sm btn-light" id="waterQualityWeek">周</button>
                                                    <button class="btn btn-sm btn-light" id="waterQualityMonth">月</button>
                                                </div>
                                            </div>
                                            <div class="card-body">
                                                <canvas id="waterQualityPredictionChart" height="250"></canvas>
                                                <div class="mt-3">
                                                    <div class="alert alert-info">
                                                        <h6><i class="bi bi-info-circle-fill me-2"></i>预测结果分析</h6>
                                                        <p>根据历史数据分析，未来7天内水质参数预计将保持稳定，pH值可能在6月15日出现小幅波动，建议提前做好水质调节准备。</p>
                                                    </div>
                                                    <div class="d-flex justify-content-between">
                                                        <span class="badge bg-success">可信度: 87%</span>
                                                        <button class="btn btn-sm btn-outline-primary" id="exportWaterPrediction">
                                                            <i class="bi bi-download"></i> 导出预测报告
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- 鱼类数量预测 -->
                                    <div class="col-md-6">
                                        <div class="card mb-3">
                                            <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
                                                <span><i class="bi bi-bar-chart-fill me-2"></i>鱼类数量预测</span>
                                                <div class="btn-group">
                                                    <button class="btn btn-sm btn-light" id="fishCountQuarter">季度</button>
                                                    <button class="btn btn-sm btn-light" id="fishCountHalfYear">半年</button>
                                                    <button class="btn btn-sm btn-light" id="fishCountYear">年</button>
                                                </div>
                                            </div>
                                            <div class="card-body">
                                                <canvas id="fishCountPredictionChart" height="250"></canvas>
                                                <div class="mt-3">
                                                    <div class="alert alert-success">
                                                        <h6><i class="bi bi-info-circle-fill me-2"></i>预测结果分析</h6>
                                                        <p>基于生长模型预测，鲈鱼数量将在8月达到收获标准，预计产量较去年同期增长12%，建议提前规划收获计划。</p>
                                                    </div>
                                                    <div class="d-flex justify-content-between">
                                                        <span class="badge bg-success">可信度: 83%</span>
                                                        <button class="btn btn-sm btn-outline-success" id="exportFishPrediction">
                                                            <i class="bi bi-download"></i> 导出预测报告
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 异常检测系统 -->
                                <div class="row mt-4">
                                    <div class="col-md-12">
                                        <div class="card">
                                            <div class="card-header bg-warning text-dark">
                                                <h5><i class="bi bi-exclamation-triangle-fill me-2"></i>异常检测系统</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="alert alert-warning mb-3">
                                                    <strong>注意: </strong>系统检测到3个潜在异常，请查看详情。
                                                </div>
                                                <div class="table-responsive">
                                                    <table class="table table-striped table-hover">
                                                        <thead>
                                                            <tr>
                                                                <th>时间</th>
                                                                <th>类型</th>
                                                                <th>位置</th>
                                                                <th>详情</th>
                                                                <th>状态</th>
                                                                <th>操作</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td>2023-11-15 08:23</td>
                                                                <td>水质异常</td>
                                                                <td>区域A-3</td>
                                                                <td>pH值突然下降至6.2</td>
                                                                <td><span class="badge bg-danger">未处理</span></td>
                                                                <td>
                                                                    <button class="btn btn-sm btn-primary">处理</button>
                                                                    <button class="btn btn-sm btn-secondary">详情</button>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td>2023-11-15 07:45</td>
                                                                <td>设备异常</td>
                                                                <td>区域B-2</td>
                                                                <td>水下摄像头UW002信号不稳定</td>
                                                                <td><span class="badge bg-warning">处理中</span></td>
                                                                <td>
                                                                    <button class="btn btn-sm btn-primary">处理</button>
                                                                    <button class="btn btn-sm btn-secondary">详情</button>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td>2023-11-14 22:10</td>
                                                                <td>鱼群异常</td>
                                                                <td>区域C-5</td>
                                                                <td>鱼群密度异常增加</td>
                                                                <td><span class="badge bg-warning">处理中</span></td>
                                                                <td>
                                                                    <button class="btn btn-sm btn-primary">处理</button>
                                                                    <button class="btn btn-sm btn-secondary">详情</button>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 鱼类智能识别 -->
                                <div class="row mt-4">
                                    <div class="col-md-6">
                                        <div class="card">
                                            <div class="card-header bg-info text-white">
                                                <h5><i class="bi bi-camera-fill me-2"></i>鱼类智能识别</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <div class="input-group">
                                                        <input type="file" class="form-control" id="fishImageUpload">
                                                        <button class="btn btn-primary" id="analyzeFishImage">分析图像</button>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="border p-2 mb-3" style="height: 200px; background-color: #f8f9fa; display: flex; align-items: center; justify-content: center;">
                                                            <span class="text-muted">上传图片预览区</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="card">
                                                            <div class="card-header">识别结果</div>
                                                            <div class="card-body">
                                                                <p>请上传鱼类图片进行智能识别</p>
                                                                <div id="recognitionResults" style="display: none;">
                                                                    <div class="mb-2">
                                                                        <strong>鱼类种类:</strong> <span id="fishSpecies">-</span>
                                                                    </div>
                                                                    <div class="mb-2">
                                                                        <strong>可信度:</strong> <span id="recognitionConfidence">-</span>
                                                                    </div>
                                                                    <div class="mb-2">
                                                                        <strong>估计大小:</strong> <span id="fishSize">-</span>
                                                                    </div>
                                                                    <div class="mb-2">
                                                                        <strong>健康状况:</strong> <span id="fishHealth">-</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- 水质智能分析 -->
                                    <div class="col-md-6">
                                        <div class="card">
                                            <div class="card-header bg-primary text-white">
                                                <h5><i class="bi bi-droplet-half me-2"></i>水质智能分析</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="waterAreaSelect" class="form-label">选择区域</label>
                                                    <select class="form-select" id="waterAreaSelect">
                                                        <option value="all">全部区域</option>
                                                        <option value="areaA">区域A</option>
                                                        <option value="areaB">区域B</option>
                                                        <option value="areaC">区域C</option>
                                                    </select>
                                                </div>
                                                <div class="card mb-3">
                                                    <div class="card-body">
                                                        <h6 class="card-title">水质综合评分</h6>
                                                        <div class="progress mb-2" style="height: 25px;">
                                                            <div class="progress-bar bg-success" role="progressbar" style="width: 85%;" aria-valuenow="85" aria-valuemin="0" aria-valuemax="100">85分 - 优良</div>
                                                        </div>
                                                        <div class="small text-muted">最近更新: 2023-11-15 10:30</div>
                                                    </div>
                                                </div>
                                                <div class="alert alert-primary">
                                                    <h6><i class="bi bi-lightbulb-fill me-2"></i>智能建议</h6>
                                                    <ul class="mb-0">
                                                        <li>区域A的溶解氧含量略低，建议增加曝气设备运行时间</li>
                                                        <li>区域C的pH值波动较大，建议检查水质调节系统</li>
                                                        <li>整体水质状况良好，适合当前养殖鱼类生长</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                    <!-- 鱼类运动轨迹追踪 -->
                                    <div class="col-md-12 mt-4">
                                        <div class="card">
                                            <div class="card-header bg-secondary text-white">
                                                <h5><i class="bi bi-map-fill me-2"></i>鱼类运动轨迹追踪</h5>
                                            </div>
                                            <div class="card-body">
                                                <canvas id="fishMovementChart" height="300"></canvas>
                                                <div class="alert alert-secondary mt-3">
                                                    <strong>说明:</strong> 实时跟踪摄像设备所捕捉的鱼群路径，可用于分析鱼类活动习性及区域健康状况。
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- 智能养殖建议 -->
                                    <div class="col-md-12 mt-4">
                                        <div class="card">
                                            <div class="card-header bg-success text-white">
                                                <h5><i class="bi bi-lightbulb-fill me-2"></i>个性化养殖建议生成</h5>
                                            </div>
                                            <div class="card-body">
                                                <button class="btn btn-outline-success mb-3" id="generateAdvice">
                                                    <i class="bi bi-magic"></i> 生成建议
                                                </button>
                                                <div id="adviceResult" class="alert alert-success" style="display: none;">
                                                    <ul>
                                                        <li>建议加强区域B的光照控制，有利于草鱼夜间进食。</li>
                                                        <li>预计8月为高产期，应提前加大饲料投放与巡检频次。</li>
                                                        <li>区域C水温略高，推荐开启温控系统以稳定水温。</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>                                    
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/intelligence.js"></script>

    <!-- 添加智能预测相关的JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 水质趋势预测图表
            const waterQualityCtx = document.getElementById('waterQualityPredictionChart').getContext('2d');
            const waterQualityChart = new Chart(waterQualityCtx, {
                type: 'line',
                data: {
                    labels: ['6月10日', '6月11日', '6月12日', '6月13日', '6月14日', '6月15日', '6月16日'],
                    datasets: [
                        {
                            label: 'pH值',
                            data: [7.2, 7.3, 7.2, 7.1, 7.0, 6.8, 7.0],
                            borderColor: 'rgba(75, 192, 192, 1)',
                            backgroundColor: 'rgba(75, 192, 192, 0.2)',
                            tension: 0.1,
                            fill: true
                        },
                        {
                            label: '溶解氧(mg/L)',
                            data: [8.5, 8.4, 8.6, 8.5, 8.3, 8.2, 8.4],
                            borderColor: 'rgba(54, 162, 235, 1)',
                            backgroundColor: 'rgba(54, 162, 235, 0.2)',
                            tension: 0.1,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: '未来7天水质参数预测'
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false
                        }
                    }
                }
            });
            
            // 鱼类数量预测图表
            const fishCountCtx = document.getElementById('fishCountPredictionChart').getContext('2d');
            const fishCountChart = new Chart(fishCountCtx, {
                type: 'bar',
                data: {
                    labels: ['6月', '7月', '8月', '9月', '10月', '11月'],
                    datasets: [
                        {
                            label: '鲈鱼预测数量(吨)',
                            data: [12, 15, 18, 16, 14, 13],
                            backgroundColor: 'rgba(255, 99, 132, 0.5)',
                            borderColor: 'rgba(255, 99, 132, 1)',
                            borderWidth: 1
                        },
                        {
                            label: '草鱼预测数量(吨)',
                            data: [8, 10, 13, 15, 14, 12],
                            backgroundColor: 'rgba(54, 162, 235, 0.5)',
                            borderColor: 'rgba(54, 162, 235, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: '未来6个月鱼类产量预测'
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: '数量(吨)'
                            }
                        }
                    }
                }
            });
            
            // 模拟鱼类识别功能
            document.getElementById('analyzeFishImage').addEventListener('click', function() {
                const fileInput = document.getElementById('fishImageUpload');
                if (fileInput.files.length > 0) {
                    // 显示识别结果区域
                    document.getElementById('recognitionResults').style.display = 'block';
                    
                    // 模拟识别结果
                    document.getElementById('fishSpecies').textContent = '鲈鱼 (Lateolabrax japonicus)';
                    document.getElementById('recognitionConfidence').textContent = '92%';
                    document.getElementById('fishSize').textContent = '约 35cm';
                    document.getElementById('fishHealth').textContent = '良好';
                    
                    // 提示用户
                    alert('图像分析完成！');
                } else {
                    alert('请先上传鱼类图片！');
                }
            });
            
            // 水质预测时间范围切换
            document.getElementById('waterQualityDay').addEventListener('click', function() {
                waterQualityChart.data.labels = ['上午8点', '上午10点', '中午12点', '下午2点', '下午4点', '下午6点', '晚上8点'];
                waterQualityChart.data.datasets[0].data = [7.2, 7.3, 7.4, 7.3, 7.2, 7.1, 7.0];
                waterQualityChart.data.datasets[1].data = [8.5, 8.6, 8.7, 8.6, 8.5, 8.4, 8.3];
                waterQualityChart.options.plugins.title.text = '今日水质参数预测';
                waterQualityChart.update();
            });
            
            document.getElementById('waterQualityWeek').addEventListener('click', function() {
                waterQualityChart.data.labels = ['6月10日', '6月11日', '6月12日', '6月13日', '6月14日', '6月15日', '6月16日'];
                waterQualityChart.data.datasets[0].data = [7.2, 7.3, 7.2, 7.1, 7.0, 6.8, 7.0];
                waterQualityChart.data.datasets[1].data = [8.5, 8.4, 8.6, 8.5, 8.3, 8.2, 8.4];
                waterQualityChart.options.plugins.title.text = '未来7天水质参数预测';
                waterQualityChart.update();
            });
            
            document.getElementById('waterQualityMonth').addEventListener('click', function() {
                waterQualityChart.data.labels = ['6月', '7月', '8月', '9月', '10月', '11月', '12月'];
                waterQualityChart.data.datasets[0].data = [7.2, 7.1, 7.0, 6.9, 7.0, 7.1, 7.2];
                waterQualityChart.data.datasets[1].data = [8.5, 8.3, 8.0, 7.8, 8.0, 8.2, 8.4];
                waterQualityChart.options.plugins.title.text = '未来6个月水质参数预测';
                waterQualityChart.update();
            });
            
            // 鱼类数量预测时间范围切换
            document.getElementById('fishCountQuarter').addEventListener('click', function() {
                fishCountChart.data.labels = ['6月', '7月', '8月'];
                fishCountChart.data.datasets[0].data = [12, 15, 18];
                fishCountChart.data.datasets[1].data = [8, 10, 13];
                fishCountChart.options.plugins.title.text = '未来3个月鱼类产量预测';
                fishCountChart.update();
            });
            
            document.getElementById('fishCountHalfYear').addEventListener('click', function() {
                fishCountChart.data.labels = ['6月', '7月', '8月', '9月', '10月', '11月'];
                fishCountChart.data.datasets[0].data = [12, 15, 18, 16, 14, 13];
                fishCountChart.data.datasets[1].data = [8, 10, 13, 15, 14, 12];
                fishCountChart.options.plugins.title.text = '未来6个月鱼类产量预测';
                fishCountChart.update();
            });
            
            document.getElementById('fishCountYear').addEventListener('click', function() {
                fishCountChart.data.labels = ['6月', '8月', '10月', '12月', '2月', '4月'];
                fishCountChart.data.datasets[0].data = [12, 18, 14, 10, 8, 15];
                fishCountChart.data.datasets[1].data = [8, 13, 14, 9, 6, 11];
                fishCountChart.options.plugins.title.text = '未来一年鱼类产量预测';
                fishCountChart.update();
            });
            
            // 导出预测报告
            document.getElementById('exportWaterPrediction').addEventListener('click', function() {
                alert('水质预测报告导出功能已触发');
            });
            
            document.getElementById('exportFishPrediction').addEventListener('click', function() {
                alert('鱼类数量预测报告导出功能已触发');
            });


            // 鱼类运动轨迹追踪图表
            const fishMovementCtx = document.getElementById('fishMovementChart').getContext('2d');
            const fishMovementChart = new Chart(fishMovementCtx, {
                type: 'line',
                data: {
                    labels: ['区域A', '区域B', '区域C', '区域D', '区域E'],
                    datasets: [
                        {
                            label: '鲈鱼轨迹路径',
                            data: [0, 2, 4, 3, 5], // 模拟“热度”或数量变化
                            borderColor: 'rgba(255, 206, 86, 1)',
                            backgroundColor: 'rgba(255, 206, 86, 0.2)',
                            fill: true,
                            tension: 0.3
                        },
                        {
                            label: '武昌鱼轨迹路径',
                            data: [1, 3, 5, 2, 4], // 模拟“热度”或数量变化
                            borderColor: 'rgba(75, 192, 192, 1)',
                            backgroundColor: 'rgba(75, 192, 192, 0.2)',
                            fill: true,
                            tension: 0.3
                        },
                        {
                            label: '狗鱼轨迹路径',
                            data: [2, 4, 6, 1, 3], // 模拟“热度”或数量变化
                            borderColor: 'rgba(153, 102, 255, 1)',
                            backgroundColor: 'rgba(153, 102, 255, 0.2)',
                            fill: true,
                            tension: 0.3
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: '鱼类在各区域活动轨迹'
                        }
                    },
                    scales: {
                        y: {
                            title: {
                                display: true,
                                text: '检测频次/热度'
                            }
                        }
                    }
                }
            });
            // 生成智能养殖建议
            document.getElementById('generateAdvice').addEventListener('click', function () {
            document.getElementById('adviceResult').style.display = 'block';
            });
        });
    </script>